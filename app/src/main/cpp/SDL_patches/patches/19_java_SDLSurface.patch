warning: in the working copy of 'D:/RotatingartLauncher/app/src/main/java/org/libsdl/app/SDLSurface.java', LF will be replaced by CRLF the next time Git touches it
diff --git a/D:/RotatingartLauncher/app/src/main/cpp/SDL_original_2301/android-project/app/src/main/java/org/libsdl/app/SDLSurface.java b/D:/RotatingartLauncher/app/src/main/java/org/libsdl/app/SDLSurface.java
index 0857e4b6f..1e55ce9dc 100644
--- a/D:/RotatingartLauncher/app/src/main/cpp/SDL_original_2301/android-project/app/src/main/java/org/libsdl/app/SDLSurface.java
+++ b/D:/RotatingartLauncher/app/src/main/java/org/libsdl/app/SDLSurface.java
@@ -1,6 +1,5 @@
 package org.libsdl.app;
 
-
 import android.content.Context;
 import android.content.pm.ActivityInfo;
 import android.hardware.Sensor;
@@ -19,7 +18,10 @@ import android.view.SurfaceHolder;
 import android.view.SurfaceView;
 import android.view.View;
 import android.view.WindowManager;
+import android.os.Handler;
+import android.os.Looper;
 
+import com.app.ralaunch.controls.TouchPointerTracker;
 
 /**
     SDLSurface. This is what we draw on, so we need to know when it's created
@@ -30,6 +32,36 @@ import android.view.WindowManager;
 public class SDLSurface extends SurfaceView implements SurfaceHolder.Callback,
     View.OnKeyListener, View.OnTouchListener, SensorEventListener  {
 
+    private static final String TAG = "SDLSurface";
+    
+    // Touch bridge native methods for sharing touch data with C#
+    private static native void nativeSetTouchData(int count, float[] x, float[] y, int screenWidth, int screenHeight);
+    private static native void nativeClearTouchData();
+    
+      private com.app.ralaunch.game.controls.GameVirtualControlsManager mVirtualControlsManager;
+      
+      // Touch bridge availability flag (lazy init)
+    private static Boolean sTouchBridgeAvailable = null;
+    
+    private static boolean isTouchBridgeAvailable() {
+        if (sTouchBridgeAvailable == null) {
+            try {
+                // Test if the native method is available
+                nativeClearTouchData();
+                sTouchBridgeAvailable = true;
+                Log.i(TAG, "Touch bridge native methods available");
+            } catch (UnsatisfiedLinkError e) {
+                Log.w(TAG, "Touch bridge native methods not available: " + e.getMessage());
+                sTouchBridgeAvailable = false;
+            }
+        }
+        return sTouchBridgeAvailable;
+    }
+    
+    // Touch data arrays for JNI
+    private float[] mTouchX = new float[10];
+    private float[] mTouchY = new float[10];
+
     // Sensors
     protected SensorManager mSensorManager;
     protected Display mDisplay;
@@ -83,14 +115,13 @@ public class SDLSurface extends SurfaceView implements SurfaceHolder.Callback,
     // Called when we have a valid drawing surface
     @Override
     public void surfaceCreated(SurfaceHolder holder) {
-        Log.v("SDL", "surfaceCreated()");
+
         SDLActivity.onNativeSurfaceCreated();
     }
 
     // Called when we lose the surface
     @Override
     public void surfaceDestroyed(SurfaceHolder holder) {
-        Log.v("SDL", "surfaceDestroyed()");
 
         // Transition to pause, if needed
         SDLActivity.mNextNativeState = SDLActivity.NativeState.PAUSED;
@@ -104,7 +135,6 @@ public class SDLSurface extends SurfaceView implements SurfaceHolder.Callback,
     @Override
     public void surfaceChanged(SurfaceHolder holder,
                                int format, int width, int height) {
-        Log.v("SDL", "surfaceChanged()");
 
         if (SDLActivity.mSingleton == null) {
             return;
@@ -130,8 +160,6 @@ public class SDLSurface extends SurfaceView implements SurfaceHolder.Callback,
             SDLActivity.getContext().notifyAll();
         }
 
-        Log.v("SDL", "Window size: " + width + "x" + height);
-        Log.v("SDL", "Device size: " + nDeviceWidth + "x" + nDeviceHeight);
         SDLActivity.nativeSetScreenResolution(width, height, nDeviceWidth, nDeviceHeight, mDisplay.getRefreshRate());
         SDLActivity.onNativeResize();
 
@@ -156,7 +184,7 @@ public class SDLSurface extends SurfaceView implements SurfaceHolder.Callback,
            double max = Math.max(mWidth, mHeight);
 
            if (max / min < 1.20) {
-              Log.v("SDL", "Don't skip on such aspect-ratio. Could be a square resolution.");
+
               skip = false;
            }
         }
@@ -165,14 +193,14 @@ public class SDLSurface extends SurfaceView implements SurfaceHolder.Callback,
         if (skip) {
             if (Build.VERSION.SDK_INT >= 24 /* Android 7.0 (N) */) {
                 if (SDLActivity.mSingleton.isInMultiWindowMode()) {
-                    Log.v("SDL", "Don't skip in Multi-Window");
+
                     skip = false;
                 }
             }
         }
 
         if (skip) {
-           Log.v("SDL", "Skip .. Surface is not ready.");
+
            mIsSurfaceReady = false;
            return;
         }
@@ -203,6 +231,9 @@ public class SDLSurface extends SurfaceView implements SurfaceHolder.Callback,
         int pointerFingerId;
         int i = -1;
         float x,y,p;
+        
+        // Update touch bridge data for C# access
+        updateTouchBridge(event);
 
         /*
          * Prevent id to be -1, since it's used in SDL internal for synthetic events
@@ -235,6 +266,16 @@ public class SDLSurface extends SurfaceView implements SurfaceHolder.Callback,
 
             SDLActivity.onNativeMouse(mouseButton, action, x, y, motionListener.inRelativeMode());
         } else {
+            // 绠€鍖栫殑瑙︽懜浜嬩欢澶勭悊 - SDL 灞備細澶勭悊铏氭嫙鎺т欢鐨勮繃婊?+            // 鎵€鏈夎Е鎽镐簨浠堕兘鍙戦€佺粰 SDL锛孲DL 灞備細鏍规嵁 consumed fingers 鍒楄〃鍐冲畾鏄惁杞崲涓洪紶鏍囦簨浠?+
+            var settingsManager = com.app.ralaunch.data.SettingsManager.getInstance();
+            // if touch events are disabled in settings, do not report any touches
+            if (!settingsManager.isTouchEventEnabled()) {
+                // handle touches
+                return true;
+            }
+
             switch(action) {
                 case MotionEvent.ACTION_MOVE:
                     for (i = 0; i < pointerCount; i++) {
@@ -297,10 +338,69 @@ public class SDLSurface extends SurfaceView implements SurfaceHolder.Callback,
 
         return true;
    }
+   
+    // Update touch bridge data for C# access (filters out virtual control touches)
+    private void updateTouchBridge(MotionEvent event) {
+        if (!isTouchBridgeAvailable()) {
+            return;
+        }
+        
+        try {
+            int action = event.getActionMasked();
+            
+            if (action == MotionEvent.ACTION_UP || action == MotionEvent.ACTION_CANCEL) {
+                // All fingers released
+                nativeClearTouchData();
+//                Log.d(TAG, "Touch bridge: cleared");
+                return;
+            }
+
+            var settingsManager = com.app.ralaunch.data.SettingsManager.getInstance();
+            // if touch events are disabled in settings, do not report any touches
+            if (!settingsManager.isTouchEventEnabled()) {
+                nativeClearTouchData();
+                return;
+            }
+            
+            int pointerCount = event.getPointerCount();
+            int actionIndex = event.getActionIndex();
+            
+            // For POINTER_UP, exclude the finger being lifted
+            boolean isPointerUp = (action == MotionEvent.ACTION_POINTER_UP);
+            
+            int validCount = 0;
+            for (int i = 0; i < pointerCount && validCount < 10; i++) {
+                // Skip the finger being lifted
+                if (isPointerUp && i == actionIndex) {
+                    continue;
+                }
+                
+                // Skip fingers consumed by virtual controls
+                int pointerId = event.getPointerId(i);
+                if (TouchPointerTracker.isPointerConsumed(pointerId)) {
+                    continue;
+                }
+                
+                // Store normalized coordinates (0-1)
+                mTouchX[validCount] = event.getX(i) / mWidth;
+                mTouchY[validCount] = event.getY(i) / mHeight;
+                validCount++;
+            }
+            
+            nativeSetTouchData(validCount, mTouchX, mTouchY, (int)mWidth, (int)mHeight);
+            
+            if (validCount > 0) {
+//                Log.d(TAG, "Touch bridge: count=" + validCount +
+//                    " p0=(" + (int)(mTouchX[0] * mWidth) + "," + (int)(mTouchY[0] * mHeight) + ")");
+            }
+        } catch (Exception e) {
+            Log.e(TAG, "Touch bridge error: " + e.getMessage());
+        }
+    }
 
     // Sensor events
     public void enableSensor(int sensortype, boolean enabled) {
-        // TODO: This uses getDefaultSensor - what if we have >1 accels?
+
         if (enabled) {
             mSensorManager.registerListener(this,
                             mSensorManager.getDefaultSensor(sensortype),
@@ -313,7 +413,7 @@ public class SDLSurface extends SurfaceView implements SurfaceHolder.Callback,
 
     @Override
     public void onAccuracyChanged(Sensor sensor, int accuracy) {
-        // TODO
+
     }
 
     @Override
@@ -358,7 +458,6 @@ public class SDLSurface extends SurfaceView implements SurfaceHolder.Callback,
                                       y / SensorManager.GRAVITY_EARTH,
                                       event.values[2] / SensorManager.GRAVITY_EARTH);
 
-
         }
     }
 
@@ -402,4 +501,16 @@ public class SDLSurface extends SurfaceView implements SurfaceHolder.Callback,
 
         return false;
     }
+    
+    /**
+     * 璁剧疆铏氭嫙鎺т欢绠＄悊鍣紙鐢ㄤ簬鏇存柊铏氭嫙榧犳爣鍏夋爣锛?+     */
+    public void setVirtualControlsManager(com.app.ralaunch.game.controls.GameVirtualControlsManager manager) {
+        mVirtualControlsManager = manager;
+    }
+    
+    /**
+     * 澶勭悊铏氭嫙榧犳爣瑙︽懜浜嬩欢锛堜娇鐢ㄥ彸鎽囨潌鐨勮櫄鎷熼紶鏍囩Щ鍔ㄦ柟寮忥級
+     * @return true 濡傛灉浜嬩欢琚櫄鎷熼紶鏍囨秷璐癸紝false 鍚﹀垯
+     */
 }
